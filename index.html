<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>SkillSwap</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header>
    <img src="logo.png" alt="SkillSwap Logo" class="logo">
    <h1>SkillSwap</h1>
  </header>

  <main>
    <!-- LOGIN -->
    <section id="auth-section">
      <h2>Anmelden / Registrieren</h2>
      <input type="email" id="email" placeholder="Email">
      <input type="password" id="password" placeholder="Passwort">
      <button onclick="signUp()">Registrieren</button>
      <button onclick="signIn()">Anmelden</button>
    </section>

    <!-- PROFIL -->
    <section id="profile-section" class="hidden">
      <h2>Dein Profil</h2>

      <!-- Avatar-Vorschau -->
      <img id="avatar-preview" class="avatar-preview hidden" />

      <!-- Avatar-Upload -->
      <input type="file" id="avatar_file" accept="image/*" onchange="uploadAvatar()" />
      <input type="hidden" id="avatar_url" />

      <!-- Persönliche Angaben -->
      <input type="text" id="name" placeholder="Name">
      <input type="number" id="age" placeholder="Alter">
      <input type="text" id="location" placeholder="Ort">

      <!-- Talente-Auswahl -->
      <div id="talent-options">
        <p>Wähle deine Talente oder füge neue hinzu:</p>
        <div id="chip-container"></div>
        <input type="text" id="new-talent" placeholder="Neues Talent eingeben" onkeydown="checkNewTalent(event)">
      </div>
      <input type="hidden" id="talents" />

      <button onclick="saveProfile()">Profil speichern</button>
      <button onclick="toggleSearch()">Talente suchen</button>
    </section>

    <!-- SUCHE -->
    <section id="search-section" class="hidden">
      <h2>Talente finden</h2>
      <input type="text" id="search-term" placeholder="z.B. Mathe">
      <button onclick="searchUsers()">Suchen</button>
      <div id="results"></div>
      <button onclick="toggleSearch()">Zurück zum Profil</button>
    </section>
  </main>

  <!-- Supabase & JS -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="script.js"></script>
</body>
</html>
<div style="position: absolute; top: 10px; right: 10px;">
  <button onclick="signOut()">Abmelden</button>
</div>
<button onclick="signOut()">Abmelden</button>
<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <title>Test Logout</title>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
</head>
<body>

  <div id="auth-section">Anmeldung hier</div>
  <div id="profile-section" class="hidden">Profil hier</div>

  <div id="logout-button" style="position: absolute; top: 10px; right: 10px; display: none;">
    <button onclick="signOut()">Abmelden</button>
  </div>

  <script>
    const supabase = supabase.createClient('https://...supabase.co', 'public-anon-key');

    window.signOut = async function() {
      const { error } = await supabase.auth.signOut();
      console.log("Logout error:", error);
      if (error) {
        alert("Fehler beim Abmelden: " + error.message);
        return;
      }
      alert("Du wurdest abgemeldet.");
      document.getElementById('auth-section').classList.remove('hidden');
      document.getElementById('profile-section').classList.add('hidden');
      document.getElementById('logout-button').style.display = 'none';
    }

    // Dummy Login simulieren:
    function fakeLogin() {
      document.getElementById('auth-section').classList.add('hidden');
      document.getElementById('profile-section').classList.remove('hidden');
      document.getElementById('logout-button').style.display = 'block';
    }

    window.onload = () => {
      // Für Testzwecke: Simuliere eingeloggt
      fakeLogin();
    }
  </script>

  <style>
    .hidden { display: none; }
  </style>

</body>
</html>
